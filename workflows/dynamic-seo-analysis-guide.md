# 動的SEO分析実行ガイド

## 概要
SerpAPIを使用してリアルタイムの検索結果データを取得し、和光葬儀社のSEO戦略を動的に分析するツールです。

## 機能
- **リアルタイム競合分析**: 現在の検索順位とトップ競合サイトの分析
- **SERP機能分析**: ローカルパック、広告、PAA、ナレッジグラフの表示状況
- **キーワード機会発見**: 関連検索から新規ターゲットキーワードを発見
- **コンテンツギャップ分析**: 競合が弱く、和光葬儀社が優位に立てる領域を特定

## 実行手順

### 1. 事前準備
```bash
# APIキー設定の確認
python test-serpapi.py

# 必要なライブラリのインストール
pip install -r requirements.txt
```

### 2. 動的分析実行
```bash
# メイン分析の実行
python seo-keyword-analyzer.py
```

### 3. 分析対象キーワード
プロンプトで定義された以下のキーワードを分析：

#### メイン（優先度：高）
- 葬儀 横浜
- 家族葬 神奈川
- 葬儀社 横浜
- 直葬 費用

#### 地域特化（優先度：中）
- 葬儀 港北区
- 葬儀社 神奈川区
- 火葬式 横浜

#### 差別化（優先度：中）
- 葬儀 追加料金なし 横浜
- 24時間対応 葬儀社 神奈川
- 葬祭ディレクター 資格者 横浜

## 出力ファイル

### JSON形式（詳細データ）
```
outputs/seo-analysis-dynamic_YYYYMMDD_HHMMSS.json
```
- 全キーワードの詳細分析データ
- 競合サイト情報
- SERP機能の詳細
- 関連検索キーワード

### Markdown形式（サマリーレポート）
```
outputs/seo-analysis-summary_YYYYMMDD_HHMMSS.md
```
- 和光葬儀社の現在順位状況
- 主要競合パターンの分析
- 新規キーワード機会
- コンテンツギャップ分析結果

## 分析結果の活用

### 1. 即座に対応すべき項目
- 圏外のキーワードで競合が弱い領域
- ローカルパック表示が多いキーワード
- 関連検索から発見された高機会キーワード

### 2. 中期的な戦略
- 大手チェーンが少ない地域特化キーワード
- People Also Ask（PAA）に表示される質問への対応
- 競合のタイトル最適化パターンの分析

### 3. 継続監視
- 月1回の定期実行で順位変動を追跡
- 新規競合の参入監視
- SERP画面の変化傾向の把握

## プロンプトとの連携

動的分析結果を以下のプロンプトで活用：

```
@prompts/seo-analysis.md を使用し、以下のリアルタイムデータを参考に分析してください：

- 生成されたJSON: outputs/seo-analysis-dynamic_[日時].json
- サマリー: outputs/seo-analysis-summary_[日時].md

具体的な競合データと現在の順位状況に基づいて、和光葬儀社のSEO戦略を提案してください。
```

## 注意事項

### API制限
- SerpAPI無料プラン: 月100回まで
- 1分析で10キーワード = 10回のAPI呼び出し
- 月に最大10回の完全分析が可能

### 実行間隔
- 3秒間隔でAPI呼び出し（制限回避）
- 完全分析には約5-10分を要する

### エラー対処
1. **APIキー無効**: `.env`ファイルの設定確認
2. **ネットワークエラー**: インターネット接続確認
3. **API制限**: 翌月の制限リセットまで待機

## カスタマイズ

### 分析キーワードの変更
`seo-keyword-analyzer.py`の`target_keywords`を編集：

```python
target_keywords = {
    "メイン（優先度：高）": [
        "your_keyword_1",
        "your_keyword_2"
    ]
}
```

### 競合パターンの調整
`competitor_patterns`でドメインパターンを調整：

```python
self.competitor_patterns = {
    "大手チェーン": ["domain1.com", "domain2.jp"],
    "地域密着": ["local_keyword1", "local_keyword2"]
}
```

---
*このガイドは動的SEO分析ツールとプロンプトの連携使用を想定しています* 